import{S as s,i as a,s as e,e as t,a as l,m as r,t as o,c as n,g as c,b as m,f as v,o as f,d as g,B as i,h as u,D as p,j as d,k as $,p as h,l as E,q as b,r as x,u as z,y as R,z as P,C as A}from"./client.11c4d7ac.js";import{O as S}from"./odometer.66f97755.js";import{r as w}from"./reconnecting-websocket.eb9bdc76.js";import"./odometer.7b90e3ba.js";function B(s){let a,e,R,P,A,w,B,D,U,N,I,C,y,O,T,F,G,k,M,H,X,j,J,L,V,W,q,K,Q,Y,Z,_,ss,as,es,ts,ls,rs,os,ns,cs,ms,vs,fs,gs,is,us,ps,ds,$s,hs,Es,bs,xs,zs,Rs,Ps,As,Ss,ws,Bs,Ds,Us,Ns,Is,Cs,ys,Os,Ts,Fs,Gs,ks,Ms,Hs,Xs,js,Js,Ls,Vs,Ws,qs,Ks,Qs,Ys,Zs,_s,sa,aa,ea,ta,la,ra,oa,na,ca,ma,va,fa,ga,ia,ua,pa,da,$a,ha,Ea,ba,xa,za,Ra,Pa,Aa,Sa,wa,Ba,Da,Ua,Na,Ia,Ca=(s[0]?.titleRoman??"Unknown")+"",ya=(s[0]?.mBpm??0)+"",Oa=(s[0]?.diffName??"Unknown")+"",Ta=(s[0]?.artistRoman??"Unknown")+"",Fa=s[7](s[6](s[0]?.time??0))+"",Ga=(s[5]>100?"100.00":s[5].toFixed(2))+"",ka=s[7](s[6](s[0]?.totalAudioTime/1e3??0))+"";return U=new S({props:{customStyle:"margin-bottom: 2px",number:s[4].currStar,size:"18px",format:"( ddd).dd"}}),I=new S({props:{customStyle:"margin-bottom: 2px",number:s[4].mStar,size:"18px",format:"( ddd).dd"}}),H=new S({props:{number:s[4].x100,size:"18px"}}),q=new S({props:{number:s[4].x50,size:"18px"}}),as=new S({props:{number:s[4].x0,size:"18px"}}),ls=new S({props:{number:s[4].UR,size:"18px",format:"( ddd).dd",formatFunction:s[8],style:"font-family:'Pretendard'; font-weight: 900; display: flex;align-content: center;align-items: center;"}}),gs=new S({props:{number:s[4].currPP,size:"24px"}}),bs=new S({props:{number:s[4].fcPP,size:"24px"}}),Ds=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mAR??0,size:"18px",format:"( ddd).dd",formatFunction:s[8]}}),Ts=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mCS??0,size:"18px",format:"( ddd).dd",formatFunction:s[8]}}),js=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mOD??0,size:"18px",format:"( ddd).dd",formatFunction:s[8]}}),Qs=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mHP??0,size:"18px",format:"( ddd).dd",formatFunction:s[8]}}),{c(){a=t("img"),e=l(),R=t("background"),P=l(),A=t("div"),w=t("div"),B=t("stat-box"),D=t("star"),r(U.$$.fragment),N=o("★ → "),r(I.$$.fragment),C=o("★"),y=l(),O=t("list"),T=t("x100"),F=t("badge"),G=o("x100"),k=l(),M=t("count"),r(H.$$.fragment),X=l(),j=t("x50"),J=t("badge"),L=o("x50"),V=l(),W=t("count"),r(q.$$.fragment),K=l(),Q=t("x0"),Y=t("badge"),Z=o("x0"),_=l(),ss=t("count"),r(as.$$.fragment),es=l(),ts=t("ur"),r(ls.$$.fragment),rs=l(),os=t("pp-box"),ns=t("cur"),cs=t("badge"),ms=o("CUR"),vs=l(),fs=t("pp"),r(gs.$$.fragment),is=o("PP"),us=l(),ps=t("fc"),ds=t("badge"),$s=o("FC"),hs=l(),Es=t("pp"),r(bs.$$.fragment),xs=o("PP"),zs=l(),Rs=t("attr-box"),Ps=t("info"),As=t("badge"),Ss=o("AR"),ws=l(),Bs=t("number"),r(Ds.$$.fragment),Us=l(),Ns=t("info"),Is=t("badge"),Cs=o("CS"),ys=l(),Os=t("number"),r(Ts.$$.fragment),Fs=l(),Gs=t("info"),ks=t("badge"),Ms=o("OD"),Hs=l(),Xs=t("number"),r(js.$$.fragment),Js=l(),Ls=t("info"),Vs=t("badge"),Ws=o("HP"),qs=l(),Ks=t("number"),r(Qs.$$.fragment),Ys=l(),Zs=t("music-box"),_s=t("wrapper"),sa=t("info"),aa=t("music-title"),ea=o(Ca),ta=l(),la=t("badges"),ra=t("badge"),oa=o(ya),na=o("♫"),ca=l(),ma=t("badge"),va=o(Oa),fa=l(),ga=t("badge"),ia=o(Ta),ua=l(),pa=t("duration"),da=t("current"),$a=o(Fa),ha=l(),Ea=t("percentate"),ba=o(Ga),xa=o("%"),za=l(),Ra=t("max"),Pa=o(ka),Aa=l(),Sa=t("bg"),wa=l(),Ba=t("bar"),Da=t("behind"),Ua=l(),Na=t("current"),this.h()},l(s){a=n(s,"IMG",{style:!0,alt:!0,class:!0}),e=c(s),R=n(s,"BACKGROUND",{class:!0}),m(R).forEach(v),P=c(s),A=n(s,"DIV",{style:!0,class:!0});var t=m(A);w=n(t,"DIV",{style:!0,class:!0});var l=m(w);B=n(l,"STAT-BOX",{style:!0,class:!0});var r=m(B);D=n(r,"STAR",{class:!0});var o=m(D);f(U.$$.fragment,o),N=g(o,"★ → "),f(I.$$.fragment,o),C=g(o,"★"),o.forEach(v),y=c(r),O=n(r,"LIST",{class:!0});var i=m(O);T=n(i,"X100",{class:!0});var u=m(T);F=n(u,"BADGE",{class:!0});var p=m(F);G=g(p,"x100"),p.forEach(v),k=c(u),M=n(u,"COUNT",{class:!0});var d=m(M);f(H.$$.fragment,d),d.forEach(v),u.forEach(v),X=c(i),j=n(i,"X50",{class:!0});var $=m(j);J=n($,"BADGE",{class:!0});var h=m(J);L=g(h,"x50"),h.forEach(v),V=c($),W=n($,"COUNT",{class:!0});var E=m(W);f(q.$$.fragment,E),E.forEach(v),$.forEach(v),K=c(i),Q=n(i,"X0",{class:!0});var b=m(Q);Y=n(b,"BADGE",{class:!0});var x=m(Y);Z=g(x,"x0"),x.forEach(v),_=c(b),ss=n(b,"COUNT",{class:!0});var z=m(ss);f(as.$$.fragment,z),z.forEach(v),b.forEach(v),i.forEach(v),r.forEach(v),es=c(l),ts=n(l,"UR",{style:!0,class:!0});var S=m(ts);f(ls.$$.fragment,S),S.forEach(v),rs=c(l),os=n(l,"PP-BOX",{style:!0,class:!0});var Ia=m(os);ns=n(Ia,"CUR",{class:!0});var Ma=m(ns);cs=n(Ma,"BADGE",{class:!0});var Ha=m(cs);ms=g(Ha,"CUR"),Ha.forEach(v),vs=c(Ma),fs=n(Ma,"PP",{class:!0});var Xa=m(fs);f(gs.$$.fragment,Xa),is=g(Xa,"PP"),Xa.forEach(v),Ma.forEach(v),us=c(Ia),ps=n(Ia,"FC",{class:!0});var ja=m(ps);ds=n(ja,"BADGE",{class:!0});var Ja=m(ds);$s=g(Ja,"FC"),Ja.forEach(v),hs=c(ja),Es=n(ja,"PP",{class:!0});var La=m(Es);f(bs.$$.fragment,La),xs=g(La,"PP"),La.forEach(v),ja.forEach(v),Ia.forEach(v),l.forEach(v),zs=c(t),Rs=n(t,"ATTR-BOX",{style:!0,class:!0});var Va=m(Rs);Ps=n(Va,"INFO",{class:!0});var Wa=m(Ps);As=n(Wa,"BADGE",{class:!0});var qa=m(As);Ss=g(qa,"AR"),qa.forEach(v),ws=c(Wa),Bs=n(Wa,"NUMBER",{class:!0});var Ka=m(Bs);f(Ds.$$.fragment,Ka),Ka.forEach(v),Wa.forEach(v),Us=c(Va),Ns=n(Va,"INFO",{class:!0});var Qa=m(Ns);Is=n(Qa,"BADGE",{class:!0});var Ya=m(Is);Cs=g(Ya,"CS"),Ya.forEach(v),ys=c(Qa),Os=n(Qa,"NUMBER",{class:!0});var Za=m(Os);f(Ts.$$.fragment,Za),Za.forEach(v),Qa.forEach(v),Fs=c(Va),Gs=n(Va,"INFO",{class:!0});var _a=m(Gs);ks=n(_a,"BADGE",{class:!0});var se=m(ks);Ms=g(se,"OD"),se.forEach(v),Hs=c(_a),Xs=n(_a,"NUMBER",{class:!0});var ae=m(Xs);f(js.$$.fragment,ae),ae.forEach(v),_a.forEach(v),Js=c(Va),Ls=n(Va,"INFO",{class:!0});var ee=m(Ls);Vs=n(ee,"BADGE",{class:!0});var te=m(Vs);Ws=g(te,"HP"),te.forEach(v),qs=c(ee),Ks=n(ee,"NUMBER",{class:!0});var le=m(Ks);f(Qs.$$.fragment,le),le.forEach(v),ee.forEach(v),Va.forEach(v),Ys=c(t),Zs=n(t,"MUSIC-BOX",{style:!0,class:!0});var re=m(Zs);_s=n(re,"WRAPPER",{class:!0});var oe=m(_s);sa=n(oe,"INFO",{class:!0});var ne=m(sa);aa=n(ne,"MUSIC-TITLE",{class:!0});var ce=m(aa);ea=g(ce,Ca),ce.forEach(v),ta=c(ne),la=n(ne,"BADGES",{class:!0});var me=m(la);ra=n(me,"BADGE",{class:!0});var ve=m(ra);oa=g(ve,ya),na=g(ve,"♫"),ve.forEach(v),ca=c(me),ma=n(me,"BADGE",{class:!0});var fe=m(ma);va=g(fe,Oa),fe.forEach(v),fa=c(me),ga=n(me,"BADGE",{class:!0});var ge=m(ga);ia=g(ge,Ta),ge.forEach(v),me.forEach(v),ua=c(ne),pa=n(ne,"DURATION",{class:!0});var ie=m(pa);da=n(ie,"CURRENT",{class:!0});var ue=m(da);$a=g(ue,Fa),ue.forEach(v),ha=c(ie),Ea=n(ie,"PERCENTATE",{class:!0});var pe=m(Ea);ba=g(pe,Ga),xa=g(pe,"%"),pe.forEach(v),za=c(ie),Ra=n(ie,"MAX",{class:!0});var de=m(Ra);Pa=g(de,ka),de.forEach(v),ie.forEach(v),ne.forEach(v),Aa=c(oe),Sa=n(oe,"BG",{class:!0}),m(Sa).forEach(v),oe.forEach(v),wa=c(re),Ba=n(re,"BAR",{class:!0});var $e=m(Ba);Da=n($e,"BEHIND",{class:!0}),m(Da).forEach(v),Ua=c($e),Na=n($e,"CURRENT",{style:!0,class:!0}),m(Na).forEach(v),$e.forEach(v),re.forEach(v),t.forEach(v),this.h()},h(){i(a,"width","0"),i(a,"height","0"),i(a,"display","none"),u(a,"alt","Background"),u(a,"class","svelte-gz3v4l"),u(R,"class","svelte-gz3v4l"),u(D,"class","svelte-gz3v4l"),u(F,"class","svelte-gz3v4l"),u(M,"class","svelte-gz3v4l"),u(T,"class","svelte-gz3v4l"),u(J,"class","svelte-gz3v4l"),u(W,"class","svelte-gz3v4l"),u(j,"class","svelte-gz3v4l"),u(Y,"class","svelte-gz3v4l"),u(ss,"class","svelte-gz3v4l"),u(Q,"class","svelte-gz3v4l"),u(O,"class","svelte-gz3v4l"),i(B,"position","absolute"),i(B,"top","150px"),i(B,"left",(s[1]?30:-200)+"px"),i(B,"transition","all 0.5s"),p(B,"class","svelte-gz3v4l"),i(ts,"position","absolute"),i(ts,"top",(s[1]?750:850)+"px"),i(ts,"transition","all 0.5s"),i(ts,"left","690px"),u(ts,"class","svelte-gz3v4l"),u(cs,"class","svelte-gz3v4l"),u(fs,"class","svelte-gz3v4l"),u(ns,"class","svelte-gz3v4l"),u(ds,"class","svelte-gz3v4l"),u(Es,"class","svelte-gz3v4l"),u(ps,"class","svelte-gz3v4l"),i(os,"position","absolute"),i(os,"top","150px"),i(os,"left",(s[1]?1270:1550)+"px"),i(os,"transition","all 0.5s"),p(os,"class","svelte-gz3v4l"),i(w,"position","absolute"),i(w,"top","92px"),i(w,"left","42px"),i(w,"width","1469px"),i(w,"height","824px"),i(w,"overflow","hidden"),u(w,"class","svelte-gz3v4l"),u(As,"class","svelte-gz3v4l"),u(Bs,"class","svelte-gz3v4l"),u(Ps,"class","svelte-gz3v4l"),u(Is,"class","svelte-gz3v4l"),u(Os,"class","svelte-gz3v4l"),u(Ns,"class","svelte-gz3v4l"),u(ks,"class","svelte-gz3v4l"),u(Xs,"class","svelte-gz3v4l"),u(Gs,"class","svelte-gz3v4l"),u(Vs,"class","svelte-gz3v4l"),u(Ks,"class","svelte-gz3v4l"),u(Ls,"class","svelte-gz3v4l"),i(Rs,"position","absolute"),i(Rs,"top","925px"),i(Rs,"left","1252px"),p(Rs,"class","svelte-gz3v4l"),p(aa,"class","svelte-gz3v4l"),u(ra,"class","svelte-gz3v4l"),u(ma,"class","svelte-gz3v4l"),u(ga,"class","svelte-gz3v4l"),u(la,"class","svelte-gz3v4l"),u(da,"class","svelte-gz3v4l"),u(Ea,"class","svelte-gz3v4l"),u(Ra,"class","svelte-gz3v4l"),u(pa,"class","svelte-gz3v4l"),u(sa,"class","svelte-gz3v4l"),u(Sa,"class","svelte-gz3v4l"),u(_s,"class","svelte-gz3v4l"),u(Da,"class","svelte-gz3v4l"),i(Na,"width",(620*s[5]/100>620?620:620*s[5]/100)+"px"),u(Na,"class","svelte-gz3v4l"),u(Ba,"class","svelte-gz3v4l"),i(Zs,"position","absolute"),i(Zs,"top","942px"),i(Zs,"right","-1228px"),p(Zs,"class","svelte-gz3v4l"),i(A,"position","absolute"),i(A,"top","0px"),u(A,"class","svelte-gz3v4l")},m(t,l){d(t,a,l),s[9](a),d(t,e,l),d(t,R,l),d(t,P,l),d(t,A,l),$(A,w),$(w,B),$(B,D),h(U,D,null),$(D,N),h(I,D,null),$(D,C),$(B,y),$(B,O),$(O,T),$(T,F),$(F,G),$(T,k),$(T,M),h(H,M,null),$(O,X),$(O,j),$(j,J),$(J,L),$(j,V),$(j,W),h(q,W,null),$(O,K),$(O,Q),$(Q,Y),$(Y,Z),$(Q,_),$(Q,ss),h(as,ss,null),$(w,es),$(w,ts),h(ls,ts,null),$(w,rs),$(w,os),$(os,ns),$(ns,cs),$(cs,ms),$(ns,vs),$(ns,fs),h(gs,fs,null),$(fs,is),$(os,us),$(os,ps),$(ps,ds),$(ds,$s),$(ps,hs),$(ps,Es),h(bs,Es,null),$(Es,xs),$(A,zs),$(A,Rs),$(Rs,Ps),$(Ps,As),$(As,Ss),$(Ps,ws),$(Ps,Bs),h(Ds,Bs,null),$(Rs,Us),$(Rs,Ns),$(Ns,Is),$(Is,Cs),$(Ns,ys),$(Ns,Os),h(Ts,Os,null),$(Rs,Fs),$(Rs,Gs),$(Gs,ks),$(ks,Ms),$(Gs,Hs),$(Gs,Xs),h(js,Xs,null),$(Rs,Js),$(Rs,Ls),$(Ls,Vs),$(Vs,Ws),$(Ls,qs),$(Ls,Ks),h(Qs,Ks,null),$(A,Ys),$(A,Zs),$(Zs,_s),$(_s,sa),$(sa,aa),$(aa,ea),$(sa,ta),$(sa,la),$(la,ra),$(ra,oa),$(ra,na),$(la,ca),$(la,ma),$(ma,va),$(la,fa),$(la,ga),$(ga,ia),$(sa,ua),$(sa,pa),$(pa,da),$(da,$a),$(pa,ha),$(pa,Ea),$(Ea,ba),$(Ea,xa),$(pa,za),$(pa,Ra),$(Ra,Pa),$(_s,Aa),$(_s,Sa),s[10](Sa),$(Zs,wa),$(Zs,Ba),$(Ba,Da),$(Ba,Ua),$(Ba,Na),Ia=!0},p(s,[a]){const e={};16&a&&(e.number=s[4].currStar),U.$set(e);const t={};16&a&&(t.number=s[4].mStar),I.$set(t);const l={};16&a&&(l.number=s[4].x100),H.$set(l);const r={};16&a&&(r.number=s[4].x50),q.$set(r);const o={};16&a&&(o.number=s[4].x0),as.$set(o),(!Ia||2&a)&&i(B,"left",(s[1]?30:-200)+"px");const n={};16&a&&(n.number=s[4].UR),ls.$set(n),(!Ia||2&a)&&i(ts,"top",(s[1]?750:850)+"px");const c={};16&a&&(c.number=s[4].currPP),gs.$set(c);const m={};16&a&&(m.number=s[4].fcPP),bs.$set(m),(!Ia||2&a)&&i(os,"left",(s[1]?1270:1550)+"px");const v={};1&a&&(v.number=s[0]?.mAR??0),Ds.$set(v);const f={};1&a&&(f.number=s[0]?.mCS??0),Ts.$set(f);const g={};1&a&&(g.number=s[0]?.mOD??0),js.$set(g);const u={};1&a&&(u.number=s[0]?.mHP??0),Qs.$set(u),(!Ia||1&a)&&Ca!==(Ca=(s[0]?.titleRoman??"Unknown")+"")&&E(ea,Ca),(!Ia||1&a)&&ya!==(ya=(s[0]?.mBpm??0)+"")&&E(oa,ya),(!Ia||1&a)&&Oa!==(Oa=(s[0]?.diffName??"Unknown")+"")&&E(va,Oa),(!Ia||1&a)&&Ta!==(Ta=(s[0]?.artistRoman??"Unknown")+"")&&E(ia,Ta),(!Ia||1&a)&&Fa!==(Fa=s[7](s[6](s[0]?.time??0))+"")&&E($a,Fa),(!Ia||32&a)&&Ga!==(Ga=(s[5]>100?"100.00":s[5].toFixed(2))+"")&&E(ba,Ga),(!Ia||1&a)&&ka!==(ka=s[7](s[6](s[0]?.totalAudioTime/1e3??0))+"")&&E(Pa,ka),(!Ia||32&a)&&i(Na,"width",(620*s[5]/100>620?620:620*s[5]/100)+"px")},i(s){Ia||(b(U.$$.fragment,s),b(I.$$.fragment,s),b(H.$$.fragment,s),b(q.$$.fragment,s),b(as.$$.fragment,s),b(ls.$$.fragment,s),b(gs.$$.fragment,s),b(bs.$$.fragment,s),b(Ds.$$.fragment,s),b(Ts.$$.fragment,s),b(js.$$.fragment,s),b(Qs.$$.fragment,s),Ia=!0)},o(s){x(U.$$.fragment,s),x(I.$$.fragment,s),x(H.$$.fragment,s),x(q.$$.fragment,s),x(as.$$.fragment,s),x(ls.$$.fragment,s),x(gs.$$.fragment,s),x(bs.$$.fragment,s),x(Ds.$$.fragment,s),x(Ts.$$.fragment,s),x(js.$$.fragment,s),x(Qs.$$.fragment,s),Ia=!1},d(t){t&&v(a),s[9](null),t&&v(e),t&&v(R),t&&v(P),t&&v(A),z(U),z(I),z(H),z(q),z(as),z(ls),z(gs),z(bs),z(Ds),z(Ts),z(js),z(Qs),s[10](null)}}}function D(s,a,e){let t,l,r,o,n,c=0;const m=s=>s.length<2?"0"+s:s,v={x100:0,x50:0,x0:0,currStar:0,mStar:0,currPP:0,fcPP:0,UR:.12,mAR:.1,mCS:.1,mOD:.1,mHP:.1};let f,g=0;return R((()=>{t=new w("ws://localhost:20727/tokens",null,{debug:!0,reconnectInterval:3e3});let s=["ppIfMapEndsNow","status","c100","c50","miss","liveStarRating","mStars","ppIfRestFced","unstableRate","mAR","mCS","mHP","mOD","mBpm","titleRoman","artistRoman","diffName","md5","time","totalAudioTime","mods"];t.onopen=a=>{console.log("Connected to Websocket."),t.send(JSON.stringify(s))},t.onmessage=s=>{e(0,l={...l,...JSON.parse(s.data)}),e(1,c=!(l.status<2||16==l.status)),null!=l?.time&&null!=l?.totalAudioTime&&e(5,g=l.time/(l.totalAudioTime/1e3)*100),null!=l&&r!=l.md5&&null!=o&&(r=l.md5,console.log("E"),e(2,o.src=`http://localhost:20727/backgroundImage?width=512&height=512&dummyData=${l.md5}&crop=1`,o),e(2,o.onload=function(){e(3,n.style.backgroundImage=`url("${o.src}")`,n)},o))},f=setInterval((()=>(s=>{e(4,v.x100=s?.c100??0,v),e(4,v.x50=s?.c50??0,v),e(4,v.x0=s?.miss??0,v),e(4,v.currStar=s?.liveStarRating??0,v),e(4,v.mStar=s?.mStars??0,v),e(4,v.currPP=s?.ppIfMapEndsNow??0,v),e(4,v.fcPP=s?.ppIfRestFced??0,v),e(4,v.UR=s?.unstableRate??0,v)})(l)),400)})),P((()=>{void 0!==t&&t.close(),null!=f&&clearInterval(f)})),[l,c,o,n,v,g,s=>(s=parseInt(s),console.log(l?.mods),l?.mods&&c?l?.mods.includes("HT")?s/.75:l?.mods.includes("DT")||l?.mods.includes("NC")?s/1.5:s:s),s=>{s=parseInt(s);const a=Math.floor(s/3600),e=Math.floor((s-3600*a)/60),t=s%60;return`${0==a?"":a.toFixed(0)+":"}${m(e.toFixed(0))}:${m(t.toFixed(0))}`},s=>s.toFixed(2),function(s){A[s?"unshift":"push"]((()=>{o=s,e(2,o)}))},function(s){A[s?"unshift":"push"]((()=>{n=s,e(3,n)}))}]}class U extends s{constructor(s){super(),a(this,s,D,B,e,{})}}export{U as default};
