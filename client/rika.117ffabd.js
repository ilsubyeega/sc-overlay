import{S as s,i as a,s as e,e as t,a as r,m as o,t as l,c,g as n,b as m,f,o as b,d as i,B as p,h as $,D as u,j as v,k as d,p as g,l as h,q as E,r as x,u as k,y as q,z as R,C as P}from"./client.26cfc0bf.js";import{O as S}from"./odometer.c138ce33.js";import{r as w}from"./reconnecting-websocket.eb9bdc76.js";import"./odometer.7b90e3ba.js";function B(s){let a,e,q,R,P,w,B,A,U,D,N,I,y,C,O,F,G,T,z,M,X,H,j,J,L,V,W,K,Q,Y,Z,_,ss,as,es,ts,rs,os,ls,cs,ns,ms,fs,bs,is,ps,$s,us,vs,ds,gs,hs,Es,xs,ks,qs,Rs,Ps,Ss,ws,Bs,As,Us,Ds,Ns,Is,ys,Cs,Os,Fs,Gs,Ts,zs,Ms,Xs,Hs,js,Js,Ls,Vs,Ws,Ks,Qs,Ys,Zs,_s,sa,aa,ea,ta,ra,oa,la,ca,na,ma,fa,ba,ia,pa,$a,ua,va,da,ga,ha,Ea,xa,ka,qa,Ra,Pa,Sa,wa,Ba,Aa,Ua,Da,Na,Ia=(s[0]?.titleRoman??"Unknown")+"",ya=(s[0]?.mBpm??0)+"",Ca=(s[0]?.diffName??"Unknown")+"",Oa=(s[0]?.artistRoman??"Unknown")+"",Fa=s[6](s[0]?.time??0)+"",Ga=(s[5]>100?"100.00":s[5].toFixed(2))+"",Ta=s[6](s[0]?.totaltime/1e3??0)+"";return U=new S({props:{customStyle:"margin-bottom: 2px",number:s[4].currStar,size:"18px",format:"( ddd).dd"}}),N=new S({props:{customStyle:"margin-bottom: 2px",number:s[4].mStar,size:"18px",format:"( ddd).dd"}}),M=new S({props:{number:s[4].x100,size:"18px"}}),W=new S({props:{number:s[4].x50,size:"18px"}}),as=new S({props:{number:s[4].x0,size:"18px"}}),rs=new S({props:{number:s[4].UR,size:"18px",format:"( ddd).dd",formatFunction:s[7],style:"font-family:'Pretendard'; font-weight: 900; display: flex;align-content: center;align-items: center;"}}),is=new S({props:{number:s[4].currPP,size:"24px"}}),Es=new S({props:{number:s[4].fcPP,size:"24px"}}),As=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mAR??0,size:"18px",format:"( ddd).dd",formatFunction:s[7]}}),Os=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mCS??0,size:"18px",format:"( ddd).dd",formatFunction:s[7]}}),Hs=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mOD??0,size:"18px",format:"( ddd).dd",formatFunction:s[7]}}),Qs=new S({props:{customStyle:"margin-bottom: 2px",number:s[0]?.mHP??0,size:"18px",format:"( ddd).dd",formatFunction:s[7]}}),{c(){a=t("img"),e=r(),q=t("background"),R=r(),P=t("div"),w=t("div"),B=t("stat-box"),A=t("star"),o(U.$$.fragment),D=l("★ → "),o(N.$$.fragment),I=l("★"),y=r(),C=t("list"),O=t("x100"),F=t("badge"),G=l("x100"),T=r(),z=t("count"),o(M.$$.fragment),X=r(),H=t("x50"),j=t("badge"),J=l("x50"),L=r(),V=t("count"),o(W.$$.fragment),K=r(),Q=t("x0"),Y=t("badge"),Z=l("x0"),_=r(),ss=t("count"),o(as.$$.fragment),es=r(),ts=t("ur"),o(rs.$$.fragment),os=r(),ls=t("pp-box"),cs=t("cur"),ns=t("badge"),ms=l("CUR"),fs=r(),bs=t("pp"),o(is.$$.fragment),ps=l("PP"),$s=r(),us=t("fc"),vs=t("badge"),ds=l("FC"),gs=r(),hs=t("pp"),o(Es.$$.fragment),xs=l("PP"),ks=r(),qs=t("attr-box"),Rs=t("info"),Ps=t("badge"),Ss=l("AR"),ws=r(),Bs=t("number"),o(As.$$.fragment),Us=r(),Ds=t("info"),Ns=t("badge"),Is=l("CS"),ys=r(),Cs=t("number"),o(Os.$$.fragment),Fs=r(),Gs=t("info"),Ts=t("badge"),zs=l("OD"),Ms=r(),Xs=t("number"),o(Hs.$$.fragment),js=r(),Js=t("info"),Ls=t("badge"),Vs=l("HP"),Ws=r(),Ks=t("number"),o(Qs.$$.fragment),Ys=r(),Zs=t("music-box"),_s=t("wrapper"),sa=t("info"),aa=t("music-title"),ea=l(Ia),ta=r(),ra=t("badges"),oa=t("badge"),la=l(ya),ca=l("♫"),na=r(),ma=t("badge"),fa=l(Ca),ba=r(),ia=t("badge"),pa=l(Oa),$a=r(),ua=t("duration"),va=t("current"),da=l(Fa),ga=r(),ha=t("percentate"),Ea=l(Ga),xa=l("%"),ka=r(),qa=t("max"),Ra=l(Ta),Pa=r(),Sa=t("bg"),wa=r(),Ba=t("bar"),Aa=t("behind"),Ua=r(),Da=t("current"),this.h()},l(s){a=c(s,"IMG",{style:!0,alt:!0,class:!0}),e=n(s),q=c(s,"BACKGROUND",{class:!0}),m(q).forEach(f),R=n(s),P=c(s,"DIV",{style:!0,class:!0});var t=m(P);w=c(t,"DIV",{style:!0,class:!0});var r=m(w);B=c(r,"STAT-BOX",{style:!0,class:!0});var o=m(B);A=c(o,"STAR",{class:!0});var l=m(A);b(U.$$.fragment,l),D=i(l,"★ → "),b(N.$$.fragment,l),I=i(l,"★"),l.forEach(f),y=n(o),C=c(o,"LIST",{class:!0});var p=m(C);O=c(p,"X100",{class:!0});var $=m(O);F=c($,"BADGE",{class:!0});var u=m(F);G=i(u,"x100"),u.forEach(f),T=n($),z=c($,"COUNT",{class:!0});var v=m(z);b(M.$$.fragment,v),v.forEach(f),$.forEach(f),X=n(p),H=c(p,"X50",{class:!0});var d=m(H);j=c(d,"BADGE",{class:!0});var g=m(j);J=i(g,"x50"),g.forEach(f),L=n(d),V=c(d,"COUNT",{class:!0});var h=m(V);b(W.$$.fragment,h),h.forEach(f),d.forEach(f),K=n(p),Q=c(p,"X0",{class:!0});var E=m(Q);Y=c(E,"BADGE",{class:!0});var x=m(Y);Z=i(x,"x0"),x.forEach(f),_=n(E),ss=c(E,"COUNT",{class:!0});var k=m(ss);b(as.$$.fragment,k),k.forEach(f),E.forEach(f),p.forEach(f),o.forEach(f),es=n(r),ts=c(r,"UR",{style:!0,class:!0});var S=m(ts);b(rs.$$.fragment,S),S.forEach(f),os=n(r),ls=c(r,"PP-BOX",{style:!0,class:!0});var Na=m(ls);cs=c(Na,"CUR",{class:!0});var za=m(cs);ns=c(za,"BADGE",{class:!0});var Ma=m(ns);ms=i(Ma,"CUR"),Ma.forEach(f),fs=n(za),bs=c(za,"PP",{class:!0});var Xa=m(bs);b(is.$$.fragment,Xa),ps=i(Xa,"PP"),Xa.forEach(f),za.forEach(f),$s=n(Na),us=c(Na,"FC",{class:!0});var Ha=m(us);vs=c(Ha,"BADGE",{class:!0});var ja=m(vs);ds=i(ja,"FC"),ja.forEach(f),gs=n(Ha),hs=c(Ha,"PP",{class:!0});var Ja=m(hs);b(Es.$$.fragment,Ja),xs=i(Ja,"PP"),Ja.forEach(f),Ha.forEach(f),Na.forEach(f),r.forEach(f),ks=n(t),qs=c(t,"ATTR-BOX",{style:!0,class:!0});var La=m(qs);Rs=c(La,"INFO",{class:!0});var Va=m(Rs);Ps=c(Va,"BADGE",{class:!0});var Wa=m(Ps);Ss=i(Wa,"AR"),Wa.forEach(f),ws=n(Va),Bs=c(Va,"NUMBER",{class:!0});var Ka=m(Bs);b(As.$$.fragment,Ka),Ka.forEach(f),Va.forEach(f),Us=n(La),Ds=c(La,"INFO",{class:!0});var Qa=m(Ds);Ns=c(Qa,"BADGE",{class:!0});var Ya=m(Ns);Is=i(Ya,"CS"),Ya.forEach(f),ys=n(Qa),Cs=c(Qa,"NUMBER",{class:!0});var Za=m(Cs);b(Os.$$.fragment,Za),Za.forEach(f),Qa.forEach(f),Fs=n(La),Gs=c(La,"INFO",{class:!0});var _a=m(Gs);Ts=c(_a,"BADGE",{class:!0});var se=m(Ts);zs=i(se,"OD"),se.forEach(f),Ms=n(_a),Xs=c(_a,"NUMBER",{class:!0});var ae=m(Xs);b(Hs.$$.fragment,ae),ae.forEach(f),_a.forEach(f),js=n(La),Js=c(La,"INFO",{class:!0});var ee=m(Js);Ls=c(ee,"BADGE",{class:!0});var te=m(Ls);Vs=i(te,"HP"),te.forEach(f),Ws=n(ee),Ks=c(ee,"NUMBER",{class:!0});var re=m(Ks);b(Qs.$$.fragment,re),re.forEach(f),ee.forEach(f),La.forEach(f),Ys=n(t),Zs=c(t,"MUSIC-BOX",{style:!0,class:!0});var oe=m(Zs);_s=c(oe,"WRAPPER",{class:!0});var le=m(_s);sa=c(le,"INFO",{class:!0});var ce=m(sa);aa=c(ce,"MUSIC-TITLE",{class:!0});var ne=m(aa);ea=i(ne,Ia),ne.forEach(f),ta=n(ce),ra=c(ce,"BADGES",{class:!0});var me=m(ra);oa=c(me,"BADGE",{class:!0});var fe=m(oa);la=i(fe,ya),ca=i(fe,"♫"),fe.forEach(f),na=n(me),ma=c(me,"BADGE",{class:!0});var be=m(ma);fa=i(be,Ca),be.forEach(f),ba=n(me),ia=c(me,"BADGE",{class:!0});var ie=m(ia);pa=i(ie,Oa),ie.forEach(f),me.forEach(f),$a=n(ce),ua=c(ce,"DURATION",{class:!0});var pe=m(ua);va=c(pe,"CURRENT",{class:!0});var $e=m(va);da=i($e,Fa),$e.forEach(f),ga=n(pe),ha=c(pe,"PERCENTATE",{class:!0});var ue=m(ha);Ea=i(ue,Ga),xa=i(ue,"%"),ue.forEach(f),ka=n(pe),qa=c(pe,"MAX",{class:!0});var ve=m(qa);Ra=i(ve,Ta),ve.forEach(f),pe.forEach(f),ce.forEach(f),Pa=n(le),Sa=c(le,"BG",{class:!0}),m(Sa).forEach(f),le.forEach(f),wa=n(oe),Ba=c(oe,"BAR",{class:!0});var de=m(Ba);Aa=c(de,"BEHIND",{class:!0}),m(Aa).forEach(f),Ua=n(de),Da=c(de,"CURRENT",{style:!0,class:!0}),m(Da).forEach(f),de.forEach(f),oe.forEach(f),t.forEach(f),this.h()},h(){p(a,"width","0"),p(a,"height","0"),p(a,"display","none"),$(a,"alt","Background"),$(a,"class","svelte-1qmkbof"),$(q,"class","svelte-1qmkbof"),$(A,"class","svelte-1qmkbof"),$(F,"class","svelte-1qmkbof"),$(z,"class","svelte-1qmkbof"),$(O,"class","svelte-1qmkbof"),$(j,"class","svelte-1qmkbof"),$(V,"class","svelte-1qmkbof"),$(H,"class","svelte-1qmkbof"),$(Y,"class","svelte-1qmkbof"),$(ss,"class","svelte-1qmkbof"),$(Q,"class","svelte-1qmkbof"),$(C,"class","svelte-1qmkbof"),p(B,"position","absolute"),p(B,"top","150px"),p(B,"left",(s[1]?30:-200)+"px"),p(B,"transition","all 0.5s"),u(B,"class","svelte-1qmkbof"),p(ts,"position","absolute"),p(ts,"top",(s[1]?750:850)+"px"),p(ts,"transition","all 0.5s"),p(ts,"left","690px"),$(ts,"class","svelte-1qmkbof"),$(ns,"class","svelte-1qmkbof"),$(bs,"class","svelte-1qmkbof"),$(cs,"class","svelte-1qmkbof"),$(vs,"class","svelte-1qmkbof"),$(hs,"class","svelte-1qmkbof"),$(us,"class","svelte-1qmkbof"),p(ls,"position","absolute"),p(ls,"top","150px"),p(ls,"left",(s[1]?1270:1550)+"px"),p(ls,"transition","all 0.5s"),u(ls,"class","svelte-1qmkbof"),p(w,"position","absolute"),p(w,"top","92px"),p(w,"left","42px"),p(w,"width","1469px"),p(w,"height","824px"),p(w,"overflow","hidden"),$(w,"class","svelte-1qmkbof"),$(Ps,"class","svelte-1qmkbof"),$(Bs,"class","svelte-1qmkbof"),$(Rs,"class","svelte-1qmkbof"),$(Ns,"class","svelte-1qmkbof"),$(Cs,"class","svelte-1qmkbof"),$(Ds,"class","svelte-1qmkbof"),$(Ts,"class","svelte-1qmkbof"),$(Xs,"class","svelte-1qmkbof"),$(Gs,"class","svelte-1qmkbof"),$(Ls,"class","svelte-1qmkbof"),$(Ks,"class","svelte-1qmkbof"),$(Js,"class","svelte-1qmkbof"),p(qs,"position","absolute"),p(qs,"top","925px"),p(qs,"left","1252px"),u(qs,"class","svelte-1qmkbof"),u(aa,"class","svelte-1qmkbof"),$(oa,"class","svelte-1qmkbof"),$(ma,"class","svelte-1qmkbof"),$(ia,"class","svelte-1qmkbof"),$(ra,"class","svelte-1qmkbof"),$(va,"class","svelte-1qmkbof"),$(ha,"class","svelte-1qmkbof"),$(qa,"class","svelte-1qmkbof"),$(ua,"class","svelte-1qmkbof"),$(sa,"class","svelte-1qmkbof"),$(Sa,"class","svelte-1qmkbof"),$(_s,"class","svelte-1qmkbof"),$(Aa,"class","svelte-1qmkbof"),p(Da,"width",(620*s[5]/100>620?620:620*s[5]/100)+"px"),$(Da,"class","svelte-1qmkbof"),$(Ba,"class","svelte-1qmkbof"),p(Zs,"position","absolute"),p(Zs,"top","942px"),p(Zs,"right","-1228px"),u(Zs,"class","svelte-1qmkbof"),p(P,"position","absolute"),p(P,"top","0px"),$(P,"class","svelte-1qmkbof")},m(t,r){v(t,a,r),s[8](a),v(t,e,r),v(t,q,r),v(t,R,r),v(t,P,r),d(P,w),d(w,B),d(B,A),g(U,A,null),d(A,D),g(N,A,null),d(A,I),d(B,y),d(B,C),d(C,O),d(O,F),d(F,G),d(O,T),d(O,z),g(M,z,null),d(C,X),d(C,H),d(H,j),d(j,J),d(H,L),d(H,V),g(W,V,null),d(C,K),d(C,Q),d(Q,Y),d(Y,Z),d(Q,_),d(Q,ss),g(as,ss,null),d(w,es),d(w,ts),g(rs,ts,null),d(w,os),d(w,ls),d(ls,cs),d(cs,ns),d(ns,ms),d(cs,fs),d(cs,bs),g(is,bs,null),d(bs,ps),d(ls,$s),d(ls,us),d(us,vs),d(vs,ds),d(us,gs),d(us,hs),g(Es,hs,null),d(hs,xs),d(P,ks),d(P,qs),d(qs,Rs),d(Rs,Ps),d(Ps,Ss),d(Rs,ws),d(Rs,Bs),g(As,Bs,null),d(qs,Us),d(qs,Ds),d(Ds,Ns),d(Ns,Is),d(Ds,ys),d(Ds,Cs),g(Os,Cs,null),d(qs,Fs),d(qs,Gs),d(Gs,Ts),d(Ts,zs),d(Gs,Ms),d(Gs,Xs),g(Hs,Xs,null),d(qs,js),d(qs,Js),d(Js,Ls),d(Ls,Vs),d(Js,Ws),d(Js,Ks),g(Qs,Ks,null),d(P,Ys),d(P,Zs),d(Zs,_s),d(_s,sa),d(sa,aa),d(aa,ea),d(sa,ta),d(sa,ra),d(ra,oa),d(oa,la),d(oa,ca),d(ra,na),d(ra,ma),d(ma,fa),d(ra,ba),d(ra,ia),d(ia,pa),d(sa,$a),d(sa,ua),d(ua,va),d(va,da),d(ua,ga),d(ua,ha),d(ha,Ea),d(ha,xa),d(ua,ka),d(ua,qa),d(qa,Ra),d(_s,Pa),d(_s,Sa),s[9](Sa),d(Zs,wa),d(Zs,Ba),d(Ba,Aa),d(Ba,Ua),d(Ba,Da),Na=!0},p(s,[a]){const e={};16&a&&(e.number=s[4].currStar),U.$set(e);const t={};16&a&&(t.number=s[4].mStar),N.$set(t);const r={};16&a&&(r.number=s[4].x100),M.$set(r);const o={};16&a&&(o.number=s[4].x50),W.$set(o);const l={};16&a&&(l.number=s[4].x0),as.$set(l),(!Na||2&a)&&p(B,"left",(s[1]?30:-200)+"px");const c={};16&a&&(c.number=s[4].UR),rs.$set(c),(!Na||2&a)&&p(ts,"top",(s[1]?750:850)+"px");const n={};16&a&&(n.number=s[4].currPP),is.$set(n);const m={};16&a&&(m.number=s[4].fcPP),Es.$set(m),(!Na||2&a)&&p(ls,"left",(s[1]?1270:1550)+"px");const f={};1&a&&(f.number=s[0]?.mAR??0),As.$set(f);const b={};1&a&&(b.number=s[0]?.mCS??0),Os.$set(b);const i={};1&a&&(i.number=s[0]?.mOD??0),Hs.$set(i);const $={};1&a&&($.number=s[0]?.mHP??0),Qs.$set($),(!Na||1&a)&&Ia!==(Ia=(s[0]?.titleRoman??"Unknown")+"")&&h(ea,Ia),(!Na||1&a)&&ya!==(ya=(s[0]?.mBpm??0)+"")&&h(la,ya),(!Na||1&a)&&Ca!==(Ca=(s[0]?.diffName??"Unknown")+"")&&h(fa,Ca),(!Na||1&a)&&Oa!==(Oa=(s[0]?.artistRoman??"Unknown")+"")&&h(pa,Oa),(!Na||1&a)&&Fa!==(Fa=s[6](s[0]?.time??0)+"")&&h(da,Fa),(!Na||32&a)&&Ga!==(Ga=(s[5]>100?"100.00":s[5].toFixed(2))+"")&&h(Ea,Ga),(!Na||1&a)&&Ta!==(Ta=s[6](s[0]?.totaltime/1e3??0)+"")&&h(Ra,Ta),(!Na||32&a)&&p(Da,"width",(620*s[5]/100>620?620:620*s[5]/100)+"px")},i(s){Na||(E(U.$$.fragment,s),E(N.$$.fragment,s),E(M.$$.fragment,s),E(W.$$.fragment,s),E(as.$$.fragment,s),E(rs.$$.fragment,s),E(is.$$.fragment,s),E(Es.$$.fragment,s),E(As.$$.fragment,s),E(Os.$$.fragment,s),E(Hs.$$.fragment,s),E(Qs.$$.fragment,s),Na=!0)},o(s){x(U.$$.fragment,s),x(N.$$.fragment,s),x(M.$$.fragment,s),x(W.$$.fragment,s),x(as.$$.fragment,s),x(rs.$$.fragment,s),x(is.$$.fragment,s),x(Es.$$.fragment,s),x(As.$$.fragment,s),x(Os.$$.fragment,s),x(Hs.$$.fragment,s),x(Qs.$$.fragment,s),Na=!1},d(t){t&&f(a),s[8](null),t&&f(e),t&&f(q),t&&f(R),t&&f(P),k(U),k(N),k(M),k(W),k(as),k(rs),k(is),k(Es),k(As),k(Os),k(Hs),k(Qs),s[9](null)}}}function A(s,a,e){let t,r,o,l,c,n;const m=s=>s.length<2?"0"+s:s,f={x100:0,x50:0,x0:0,currStar:0,mStar:0,currPP:0,fcPP:0,UR:.12,mAR:.1,mCS:.1,mOD:.1,mHP:.1};let b,i=0;return q((()=>{t=new w("ws://localhost:20727/tokens",null,{debug:!0,reconnectInterval:3e3});let s=["ppIfMapEndsNow","status","c100","c50","miss","liveStarRating","mStars","ppIfRestFced","unstableRate","mAR","mCS","mHP","mOD","mBpm","titleRoman","artistRoman","diffName","md5","time","totaltime"];t.onopen=a=>{console.log("Connected to Websocket."),t.send(JSON.stringify(s))},t.onmessage=s=>{e(0,r={...r,...JSON.parse(s.data)}),e(1,o=!(r.status<2||16==r.status)),null!=r?.time&&null!=r?.totaltime&&e(5,i=r.time/(r.totaltime/1e3)*100),null!=r&&l!=r.md5&&null!=c&&(l=r.md5,console.log("E"),e(2,c.src=`http://localhost:20727/backgroundImage?width=512&height=512&dummyData=${r.md5}&crop=1`,c),e(2,c.onload=function(){e(3,n.style.backgroundImage=`url("${c.src}")`,n)},c))},b=setInterval((()=>(s=>{e(4,f.x100=s?.c100??0,f),e(4,f.x50=s?.c50??0,f),e(4,f.x0=s?.miss??0,f),e(4,f.currStar=s?.liveStarRating??0,f),e(4,f.mStar=s?.mStars??0,f),e(4,f.currPP=s?.ppIfMapEndsNow??0,f),e(4,f.fcPP=s?.ppIfRestFced??0,f),e(4,f.UR=s?.unstableRate??0,f)})(r)),400)})),R((()=>{void 0!==t&&t.close(),null!=b&&clearInterval(b)})),[r,o,c,n,f,i,s=>{s=parseInt(s);const a=Math.floor(s/3600),e=Math.floor((s-3600*a)/60),t=s%60;return`${0==a?"":a.toFixed(0)+":"}${m(e.toFixed(0))}:${m(t.toFixed(0))}`},s=>s.toFixed(2),function(s){P[s?"unshift":"push"]((()=>{c=s,e(2,c)}))},function(s){P[s?"unshift":"push"]((()=>{n=s,e(3,n)}))}]}class U extends s{constructor(s){super(),a(this,s,A,B,e,{})}}export{U as default};
