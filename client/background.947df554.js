import{S as s,i as t,s as n,e as a,a as e,c as o,g as l,b as c,f as r,h as i,B as u,j as d,n as h,y as m,z as g,C as f}from"./client.26cfc0bf.js";import{r as p}from"./reconnecting-websocket.eb9bdc76.js";function b(s){let t,n,m;return{c(){t=a("img"),n=e(),m=a("div"),this.h()},l(s){t=o(s,"IMG",{class:!0,style:!0,alt:!0}),n=l(s),m=o(s,"DIV",{class:!0}),c(m).forEach(r),this.h()},h(){i(t,"class","dummyimage"),u(t,"width","0"),u(t,"height","0"),u(t,"display","none"),i(t,"alt","Background"),i(m,"class","background svelte-d1g6be")},m(a,e){d(a,t,e),s[2](t),d(a,n,e),d(a,m,e),s[3](m)},p:h,i:h,o:h,d(a){a&&r(t),s[2](null),a&&r(n),a&&r(m),s[3](null)}}}function y(s,t,n){let a,e,o,l,c,r=20727;return m((()=>{var s=window.location.hash.split("#");2==s.length&&"number"==typeof parseInt(s[1])&&(r=parseInt(s[1])),a=new p("ws://localhost:"+r+"/tokens",null,{debug:!0,reconnectInterval:3e3});let t=["md5"];a.onopen=s=>{console.log("Connected to Websocket."),a.send(JSON.stringify(t))},a.onmessage=s=>{e={...e,...JSON.parse(s.data)},null!=e&&o!=e.md5&&null!=l&&(o=e.md5,n(0,l.src=`http://localhost:${r}/backgroundImage?width=1920&height=1080&dummyData=${e.md5}&crop=1`,l),n(0,l.onload=function(){n(1,c.style.backgroundImage=`url("${l.src}")`,c)},l))}})),g((()=>{void 0!==a&&a.close()})),[l,c,function(s){f[s?"unshift":"push"]((()=>{l=s,n(0,l)}))},function(s){f[s?"unshift":"push"]((()=>{c=s,n(1,c)}))}]}class k extends s{constructor(s){super(),t(this,s,y,b,n,{})}}export{k as default};
