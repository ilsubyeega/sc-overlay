import{_ as t,a as n,b as e,c as r,i as o,d as c,e as s,S as a,s as u,f as i,g as l,h as f,m as p,j as h,l as d,n as g,J as m,o as y,u as b,E as O,F as v,K as j}from"./client.7123c125.js";import{r as w,_ as P}from"./reconnecting-websocket.fa06de19.js";function k(t){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var o,c=n(t);if(r){var s=n(this).constructor;o=Reflect.construct(c,arguments,s)}else o=c.apply(this,arguments);return e(this,o)}}function I(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable}))),e.push.apply(e,r)}return e}function D(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?I(Object(e),!0).forEach((function(n){P(t,n,e[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):I(Object(e)).forEach((function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}))}return t}function R(t){var n,e,r;return{c:function(){n=i("img"),e=l(),r=i("div"),this.h()},l:function(t){n=f(t,"IMG",{class:!0,style:!0,alt:!0}),e=p(t),r=f(t,"DIV",{class:!0}),h(r).forEach(d),this.h()},h:function(){g(n,"class","dummyimage"),m(n,"width","0"),m(n,"height","0"),m(n,"display","none"),g(n,"alt","Background"),g(r,"class","background svelte-d1g6be")},m:function(o,c){y(o,n,c),t[2](n),y(o,e,c),y(o,r,c),t[3](r)},p:b,i:b,o:b,d:function(o){o&&d(n),t[2](null),o&&d(e),o&&d(r),t[3](null)}}}function S(t,n,e){var r,o,c,s,a,u=20727;return O((function(){var t=window.location.hash.split("#");2==t.length&&"number"==typeof parseInt(t[1])&&(u=parseInt(t[1])),r=new w("ws://localhost:"+u+"/tokens",null,{debug:!0,reconnectInterval:3e3});var n=["md5"];r.onopen=function(t){console.log("Connected to Websocket."),r.send(JSON.stringify(n))},r.onmessage=function(t){null!=(o=D(D({},o),JSON.parse(t.data)))&&c!=o.md5&&null!=s&&(c=o.md5,e(0,s.src="http://localhost:".concat(u,"/backgroundImage?width=1920&height=1080&dummyData=").concat(o.md5,"&crop=1"),s),e(0,s.onload=function(){e(1,a.style.backgroundImage='url("'.concat(s.src,'")'),a)},s))}})),v((function(){void 0!==r&&r.close()})),[s,a,function(t){j[t?"unshift":"push"]((function(){e(0,s=t)}))},function(t){j[t?"unshift":"push"]((function(){e(1,a=t)}))}]}var E=function(n){t(i,a);var e=k(i);function i(t){var n;return r(this,i),n=e.call(this),o(c(n),t,S,R,u,{}),n}return s(i)}();export{E as default};
