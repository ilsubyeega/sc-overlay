import{S as s,i as t,s as e,e as n,a,c as o,g as l,b as c,f as r,h as i,B as u,j as d,n as h,y as m,z as g,C as p}from"./client.e59787d2.js";import{r as f}from"./reconnecting-websocket.eb9bdc76.js";function b(s){let t,e,m;return{c(){t=n("img"),e=a(),m=n("div"),this.h()},l(s){t=o(s,"IMG",{class:!0,style:!0,alt:!0}),e=l(s),m=o(s,"DIV",{class:!0}),c(m).forEach(r),this.h()},h(){i(t,"class","dummyimage"),u(t,"width","0"),u(t,"height","0"),u(t,"display","none"),i(t,"alt","Background"),i(m,"class","background svelte-d1g6be")},m(n,a){d(n,t,a),s[2](t),d(n,e,a),d(n,m,a),s[3](m)},p:h,i:h,o:h,d(n){n&&r(t),s[2](null),n&&r(e),n&&r(m),s[3](null)}}}function y(s,t,e){let n,a,o,l,c,r=20727;return m((()=>{var s=window.location.hash.split("#");2==s.length&&"number"==typeof parseInt(s[1])&&(r=parseInt(s[1])),n=new f("ws://localhost:"+r+"/tokens",null,{debug:!0,reconnectInterval:3e3});let t=["md5"];n.onopen=s=>{console.log("Connected to Websocket."),n.send(JSON.stringify(t))},n.onmessage=s=>{a={...a,...JSON.parse(s.data)},null!=a&&o!=a.md5&&null!=l&&(o=a.md5,e(0,l.src=`http://localhost:${r}/backgroundImage?width=1920&height=1080&dummyData=${a.md5}&crop=1`,l),e(0,l.onload=function(){e(1,c.style.backgroundImage=`url("${l.src}")`,c)},l))}})),g((()=>{void 0!==n&&n.close()})),[l,c,function(s){p[s?"unshift":"push"]((()=>{l=s,e(0,l)}))},function(s){p[s?"unshift":"push"]((()=>{c=s,e(1,c)}))}]}class k extends s{constructor(s){super(),t(this,s,y,b,e,{})}}export{k as default};
